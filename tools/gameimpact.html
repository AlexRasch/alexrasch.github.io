<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Impact Calculator</title>
    <meta name="author" content="Alex Rasch">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/variables.css">
    <link rel="stylesheet" href="/assets/css/colors.css">
    <link rel="stylesheet" href="/assets/css/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>
    <div class="container">
        <h1>Game Impact Calculator</h1>
        <p>Use this tool to explore how changes in the probability of an event occurring (0 - 100%) can impact your game
            outcomes. Enter the probability of the event and the number of attempts to calculate the likelihood of the
            event happening.</p>
        <label for="odds">Event Probability (%):</label>
        <input type="text" id="odds" step="0.01" min="0" max="100"><br><br>
        <label for="events">Number of Events*:</label>
        <input type="number" id="events" min="1"><br><br>
        <button onclick="calculateProbability()" class="btn btn-info">Calculate Probability</button>
        <p id="result"></p>
        <table id="probabilityTable" class="table table-striped" border="1">
            <tr>
                <th>Number of Events</th>
                <th>Chosen Odds (%)</th>
                <th>Probability (%)</th>
            </tr>
        </table>
        <p>
            <strong>Note:</strong> Use this tool to analyze how adjustments to event probabilities (such as critical
            strike chances) impact your in-game outcomes. For instance, if you want to evaluate the effects of an
            increased chance to land critical strikes, follow these steps:
        </p>
        <ul>
            <li><strong>Event Probability:</strong> Enter the critical strike chance.</li>
            <li><strong>Event:</strong> Specify the action that triggers the event, like an auto attack.</li>
        </ul>
    </div>
    <script>
        function calculateProbability() {
            var oddsPercentage = parseFloat(document.getElementById("odds").value);
            var numberOfEvents = parseInt(document.getElementById("events").value);
    
            if (!isValidInput(oddsPercentage, numberOfEvents)) {
                return;
            }
    
            clearTable();
    
            var odds = oddsPercentage / 100;
            var probability = calculateEventProbability(odds, numberOfEvents);
            displayResult(probability);
    
            generateTableRows(oddsPercentage, odds, numberOfEvents);
        }
    
        function isValidInput(oddsPercentage, numberOfEvents) {
            if (isNaN(oddsPercentage) || isNaN(numberOfEvents) || oddsPercentage < 0 || oddsPercentage > 100 || numberOfEvents < 1) {
                document.getElementById("result").innerHTML = "Please enter valid values.";
                return false;
            }
            return true;
        }
    
        function calculateEventProbability(odds, numberOfEvents) {
            return 1 - Math.pow(1 - odds, numberOfEvents);
        }
    
        function displayResult(probability) {
            document.getElementById("result").innerHTML = "Probability: " + (probability * 100).toFixed(2) + "%";
        }
    
        function generateTableRows(oddsPercentage, odds, numberOfEvents) {
            var table = document.getElementById("probabilityTable");
            var eventCounts = [1, 2, 3, 4, 5, 10, 15];
    
            for (var i = 0; i < eventCounts.length; i++) {
                var count = eventCounts[i];
                var newRow = table.insertRow(-1);
                var newCell1 = newRow.insertCell(0);
                var newCell2 = newRow.insertCell(1);
                var newCell3 = newRow.insertCell(2);
    
                var eventProbability = calculateEventProbability(odds, count);
                newCell1.innerHTML = count;
                newCell2.innerHTML = oddsPercentage + "%";
                newCell3.innerHTML = (eventProbability * 100).toFixed(2) + "%";
            }
        }
    
        function clearTable() {
            var table = document.getElementById("probabilityTable");
            var rowCount = table.rows.length;
            for (var i = rowCount - 1; i > 0; i--) {
                table.deleteRow(i);
            }
        }
    </script>
    
</body>

</html>